import { Story, Canvas, Meta, ArgsTable } from "@storybook/addon-docs";
import { useState, useCallback } from 'react';
import "../config";
import Input from "../ui/input";
import { availableIcons } from "../ui/icon";

<Meta
  title="Page/Input"
  component={Input}
  argTypes={{
    value: {
      table: { category: "Props" },
    },
    label: {
      table: { category: "Props" },
    },
    helperText: {
      table: { category: "Props" },
    },
    size: {
      control: { type: "select" },
      table: { category: "Props" },
    },
    error: {
      table: { category: "State" },
    },
    disabled: {
      table: { category: "State" },
    },
    fullWidth: {
      table: { category: "State" },
    },
    multiline: {
      table: { category: "State" },
    },
    startIcon: {
      options: availableIcons,
      control: { type: "select" },
      table: { category: "Props" },
    },
    endIcon: {
      options: availableIcons,
      control: { type: "select" },
      table: { category: "Props" },
    },
  }}
/>

export const Template = (args) => {
  const [value, setValue] = useState(args.value || "")
  const onChange = useCallback(e => {
    setValue(e.target.value)
  }, [])
  return (
    <Input {...args} value={value} onChange={onChange} />
  )
};

# Input

<Canvas>
  <Story
    name="Playground"
    parameters={{
      layout: "centered",
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Playground" />

# Stories

## Default

<Canvas>
  <Story name="Default input">{Template.bind({})}</Story>
</Canvas>

## Error

<Canvas>
  <Story
    name="Error input"
    args={{
      error: true,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Disabled

<Canvas>
  <Story
    name="Disabled input"
    args={{
      disabled: true,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## With helpertext

<Canvas>
  <Story
    name="Default input with helper text"
    args={{
      helperText: "Some interesting text",
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="Error input with helper text"
    args={{
      helperText: "Some interesting text",
      error: true,
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="Disabled input with helper text"
    args={{
      helperText: "Some interesting text",
      disabled: true,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## With icon

<Canvas>
  <Story
    name="With icon at the start"
    args={{
      startIcon: "home",
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="With icon at the end"
    args={{
      endIcon: "home",
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Set input value

<Canvas>
  <Story
    name="With value"
    args={{
      value: "Text",
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Sizes

<Canvas>
  <Story
    name="Small size"
    args={{
      size: "sm",
    }}
  >
    {Template.bind({})}
  </Story>
  <Story
    name="Default size"
    args={{
      size: "md",
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Full width

<Canvas>
  <Story
    name="With full width"
    args={{
      fullWidth: true,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Multiline

<Canvas>
  <Story
    name="Multiline variant"
    args={{
      multiline: true,
      rows: 4,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
